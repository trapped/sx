redis:
  readaddresses:
    - localhost:6379
  writeaddresses:
    - localhost:6379

services:
  - name: clauer
    addresses:
      - localhost:7090
    routes:
      - routes:
          - name: keys
            method: GET
            path: /keys
            # cache:
            #   ttl: 30s
          - name: rotate
            method: POST
            path: /rotate
            auth:
              bearer:
                publickey: '{"use":"sign","kty":"oct","kid":"005456ff-1262-4bf0-a608-8534e1fe2763","alg":"HS256","k":"L0FCL4hivd7ShePdJnzEEoqlwoOfCrkcqdbXdADNk0s523xV7C5Sr6GiRIMpvNIelEsR6ta7MZnELY4JoHrm_w"}'
          - name: follow
            method: GET
            path: /follow
  - name: deliveries-sftp-auth
    addresses:
      - django
    routes:
      - auth:
          bearer:
            publickey: '{"use":"sign","kty":"oct","kid":"005456ff-1262-4bf0-a608-8534e1fe2763","alg":"HS256","k":"L0FCL4hivd7ShePdJnzEEoqlwoOfCrkcqdbXdADNk0s523xV7C5Sr6GiRIMpvNIelEsR6ta7MZnELY4JoHrm_w"}'
        routes:
          - name: sftp-auth
            method: GET
            path: /api/v2/deliveries/sftp-auth/
            cache:
              keys:
                - query: username
                - query: password
                - query: public_key
              ttl: 1h
